<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>title</title>
    <!-- Bootstrap -->
    <link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../utils/datatables/media/css/dataTables.bootstrap.min.css">
    <link rel="stylesheet" href="../css/admin-frame/frame-list.css">
    <script src="../js/jquery/jquery.min.js"></script>
    <script src="../bootstrap/js/bootstrap.min.js"></script>
    <script src="../js/html5shiv/html5shiv.min.js"></script>
    <script src="../js/respond/respond.min.js"></script>
    <script src="../utils/datatables/media/js/jquery.dataTables.min.js"></script>
    <script src="../utils/datatables/media/js/dataTables.bootstrap.min.js"></script>
    <script src="../utils/pdfJS/build/pdf.js"></script>
    <script src="../js/admin-system/get-list.js"></script>
    <script>
        $(function () {
            var userurl = 'http://192.168.168.34:80';
            var reaseachurl = 'http://192.168.168.34:8080';
            var filename = 'ss.pdf';
            var reportList = getReportList(userurl);
            console.log(reportList);
            $(".container-fluid").css("height", $(window).height()+"px");
            $(".main-panel").css("height", $(".container-fluid").height()+"px");
            $(".main-panel").css("width", $(".container-fluid").width()+"px");
            $("#title1").css("line-height",$("#title").height()+"px");
            $("#table").DataTable({
                language: {
                    "sProcessing": "处理中...",
                    "sLengthMenu": "显示 _MENU_ 项结果",
                    "sZeroRecords": "没有匹配结果",
                    "sInfo": "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
                    "sInfoEmpty": "显示第 0 至 0 项结果，共 0 项",
                    "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
                    "sInfoPostFix": "",
                    "sSearch": "搜索:",
                    "sUrl": "",
                    "sEmptyTable": "表中数据为空",
                    "sLoadingRecords": "载入中...",
                    "sInfoThousands": ",",
                    "oPaginate": {
                        "sFirst": "首页",
                        "sPrevious": "上页",
                        "sNext": "下页",
                        "sLast": "末页"
                    },
                    "oAria": {
                        "sSortAscending": ": 以升序排列此列",
                        "sSortDescending": ": 以降序排列此列"
                    }
                },
                "aoColumnDefs":[
                    {//倒数第一列
                        "targets":-1,
                        "bSortable": false,
                        render: function(data, type, row) {
                            var html = '<button class="btn btn-primary">预览报告</button>';
                            return html;
                        }
                    },
                ],
                data: reportList,
                columns:[
                    {data: "reportID", title: "报告编号"},
                    {data: "reportName", title: "报告名称"},
                    {data: "reportCode", title: "流水单号"},
                    {data: "testID", title: "试验单编号"},
                    {data: "addtime", title: "添加时间"},
                    {data: '', title: "操作"}
                ]
            });
            $("#table").click(function (ev) {
                var ev = ev || event;
                var aTd = ev.target.parentNode.parentNode.children;
                if(ev.target.innerHTML === "预览报告") {
                    var link = "./pdfJS/web/viewer.html?file=../../../pdfFile/"+filename;
                    window.location.href = link;
                }
            });
        })
    </script>
</head>
<body>
<div class="container-fluid" style="margin: 0; padding: 0;">
    <div class="main-panel panel panel-primary">
        <div class="panel-heading" >
            <div class="panel-title" >
                <div class="row" id="title">
                    <span id="title1">报告列表</span>
                </div>
            </div>
        </div>
        <div class="panel-body">
            <table class="table table-responsive table-bordered table-hover" id="table">
            </table>
        </div>
    </div>
</div>
</body>
</html>